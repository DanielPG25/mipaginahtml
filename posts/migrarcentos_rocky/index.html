<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <meta name="color-scheme" content="light dark">

    

    <meta name="author" content="Daniel Parrales">
    <meta name="description" content="Migración de Centos 8 a Rocky Linux">
    <meta name="keywords" content="blog,developer,personal,">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Migración de Centos 8 a Rocky Linux"/>
<meta name="twitter:description" content="Migración de Centos 8 a Rocky Linux"/>

    <meta property="og:title" content="Migración de Centos 8 a Rocky Linux" />
<meta property="og:description" content="Migración de Centos 8 a Rocky Linux" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sysadblog.onrender.com/posts/migrarcentos_rocky/" />
<meta property="article:published_time" content="2021-11-06T20:39:03+01:00" />
<meta property="article:modified_time" content="2021-11-06T20:39:03+01:00" />


    <title>
  Migración de Centos 8 a Rocky Linux · Sysadblog
</title>

    
      <link rel="canonical" href="https://sysadblog.onrender.com/posts/migrarcentos_rocky/">
    

    <link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="/css/coder.min.8e2b2510f60e1715eae08d113a808dcdaf17f6f711edb9e969be38d0074d240d.css" integrity="sha256-jislEPYOFxXq4I0ROoCNza8X9vcR7bnpab440AdNJA0=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css" integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    

    <meta name="generator" content="Hugo 0.80.0" />
  </head>

  
  
    
  
  <body class="preload-transitions colorscheme-auto"
        onload=""
  >
    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Sysadblog
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/aboutme">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/categories">Categories</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://sysadblog.onrender.com/posts/migrarcentos_rocky/">
              Migración de Centos 8 a Rocky Linux
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime='2021-11-06T20:39:03&#43;01:00'>
                November 6, 2021
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          <div class="authors">
    <i class="fa fa-user" aria-hidden="true"></i>
      <a href="/authors/daniel-parrales/">Daniel Parrales</a></div>
          <div class="categories">
  <i class="fa fa-folder" aria-hidden="true"></i>
    <a href="/categories/administraci%C3%B3n-de-sistemas-operativos/">Administración de Sistemas Operativos</a></div>

          
        </div>
      </header>

      <div>
        
        <h1 id="migración-de-centos-8-a-rocky-linux">
  Migración de Centos 8 a Rocky Linux
  <a class="heading-link" href="#migraci%c3%b3n-de-centos-8-a-rocky-linux">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>Debido a las últimas noticias sobre Centos 8, nos vemos obligados a tener que tomar un decisión con respecto al futuro de las máquinas que ahora mismo estén funcionando con Centos 8. Esta decisión será a que sistema operativo debemos migrar dichas máquinas. En este momento hay varias opciones de entre las que elegir: Rocky Linux, Alma Linux, Red Hat Enterprise Linux, Oracle Linux, etc. Es por ello que tenemos que sopesar los pros y los contras de las diferentes distribuciones, sabiendo siempre que, como ha pasado con Centos 8, es posible que la distribución que elijamos pierda su soporte en algún punto y tengamos que volver a cambiar más adelante.</p>
<p>Dicho todo lo anterior, he optado por hacer la migración de una máquina con el sistema Centos 8 a Rocky Linux. He optado por elegir este sistema debido a los siguientes motivos:</p>
<ul>
<li>Es una distribución basada en un fork de Centos, por lo que habrá muy pocas cosas que cambien entre Centos y Rocky, lo que facilitará la labor en las migraciones.</li>
<li>Lo mantiene la misma comunidad que mantenía Centos, por lo que podemos esperar un nivel de apoyo similar del público.</li>
<li>Cuenta con los repositorios oficiales de Centos, por lo que hay una baja probabilidad de que perdamos paquetes durante la migración.</li>
<li>Rocky Linux se encuentra dirigido por Gregory Kurtzer, el fundador del proyecto Centos.</li>
<li>Proporciona un script de migración, de forma que contamos con menos riesgo de error humano durante la migración.</li>
<li>Está respalda por empresas y orgacinaciones importantes del sector, como pueden ser Amazon Web Service, Google Cloud, Microsoft Azure, Montavista, entre otros, por lo que podemos deducir que la vida de este sistema no será corta.</li>
</ul>
<p>Con todo esto dicho, vamos a pasar a explicar el escenario del que disponemos:</p>
<p>Tenemos una máquina con Centos 8 instalado. En dicha máquina están instalados y funcionando los siguientes programas/paquetes:</p>
<ul>
<li>Servidor de ssh (openssh-server)</li>
<li>Servidor web (nginx)</li>
<li>Php-fpm</li>
<li>Servidor de base de datos (mariadb-server) con tablas y usuarios creados</li>
<li>Servidor de base de datos (postgresql)</li>
</ul>
<p>También he creado tres usuruarios llamados prueba1, prueba2 y prueba3.</p>
<p>Con este escenario creado vamos a iniciar la migración de Centos 8 a Rocky Linux:</p>
<p>En primer lugar vamos a actualizar el sistema a la última versión:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">dnf update -y

dnf upgrade -y
</code></pre></div><p>Una vez hecho esto reiniciamos el sistema:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">reboot
</code></pre></div><p>Cuando hayamos reiniciado, descargamos el script de migración a Rocky Linux, llamado <code>migrate2rocky.sh</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">wget https://raw.githubusercontent.com/rocky-linux/rocky-tools/main/migrate2rocky/migrate2rocky.sh
</code></pre></div><p>Añadimos los permisos de ejecución a dicho script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">chmod +x migrate2rocky.sh
</code></pre></div><p>Empezamos la migración ejecutando el script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">./migrate2rocky.sh -r
</code></pre></div><p><img src="/images/migracion_centos8/empezar_migracion.png" alt="empezar_migracion.png"></p>
<p>Usamos la opción <code>-r</code> en el script para indicarle que queremos que la migración tiene que ser a Rocky Linux. Tras esto el script analizará los repositorios y paquetes instalados, y los actualizará/modificará o instalará otros que sean necesarios para adaptarlos a Rocky Linux. Una vez que todos los paquetes necesarios hayan sido instalados/actualizados, el script nos pedirá que reiniciemos el sistema:</p>
<p><img src="/images/migracion_centos8/script_completado.png" alt="script_completado.png"></p>
<p>Ahora cuando reiniciemos, ya vemos que podemos acceder a rocky:</p>
<p><img src="/images/migracion_centos8/rocky.png" alt="rocky.png"></p>
<p><img src="/images/migracion_centos8/comprobacion.png" alt="comprobacion.png"></p>
<p>Ahora miremos si los servicio mencionados anteriormente siguen funcionando:</p>
<ul>
<li>Servidor de ssh (openssh-server): Funciona perfectamente (de hecho estoy comprobando los servicios conectado por ssh).</li>
</ul>
<p><img src="/images/migracion_centos8/ssh_rocky.png" alt="ssh_rocky.png"></p>
<ul>
<li>Servidor web (nginx): Funciona perfectamente, mostrando la web de inicio.</li>
</ul>
<p><img src="/images/migracion_centos8/nginx_rocky.png" alt="nginx_rocky.png"></p>
<p><img src="/images/migracion_centos8/pagina_nginx.png" alt="pagina_nginx.png"></p>
<ul>
<li>Php-fpm: También funciona perfectamente, mostrando el fichero <code>info.php</code> de forma adecuada:</li>
</ul>
<p><img src="/images/migracion_centos8/phpfpm_rocky.png" alt="phpfpm_rocky.png"></p>
<ul>
<li>Servidor de base de datos (mariadb-server) con tablas y usuarios creados: También funciona, conservando los datos de las tablas y usuarios que creamos anteriormente.</li>
</ul>
<p><img src="/images/migracion_centos8/mariadb_rocky.png" alt="mariadb_rocky.png"></p>
<p><img src="/images/migracion_centos8/tablas_rocky.png" alt="tablas_rocky.png"></p>
<ul>
<li>Servidor de base de datos (postgresql): Sigue funcionando el servicio como es debido.</li>
</ul>
<p><img src="/images/migracion_centos8/postgresql_rocky.png" alt="postgresql_rocky.png"></p>
<p>Y los usuarios que creamos antes siguen ahí:</p>
<p><img src="/images/migracion_centos8/usuarios_rocky.png" alt="usuarios_rocky.png"></p>
<p>Una vez que hemos comprobado que todos los servicios funcionan, podemos afirmar que la migración ha sido un éxito. Como hemos podido ver, la migración no ha sido difícil debido al script que nos proporciona Rocky, lo cual atraerá a mucha parte de la comunidad de servidores que en este momento está funcionando con Centos 8.</p>
<p>Como hemos mencionado antes, Rocky es una solución bastante plausible para realizar la migración desde Centos 8, pero solo el tiempo dirá si ha sido una buena o una mala decisión el haber realizado la migración a Rocky. En el peor de los casos, tendremos que volver a realizar la migración a otro sistema operativo, pero esperemos que a Rocky aún le quede bastante tiempo por delante.</p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>El camino a la locura de un sysadmin</p>
      
      
        ©
        
        2021
         Daniel Parrales 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
    </section>
  </footer>


    </main>

    
      
      <script src="/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js" integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
