<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <meta name="color-scheme" content="light dark">

    

    <meta name="author" content="Daniel Parrales">
    <meta name="description" content="Despliegue de aplicaciones python">
    <meta name="keywords" content="blog,developer,personal,">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Despliegue de aplicaciones python"/>
<meta name="twitter:description" content="Despliegue de aplicaciones python"/>

    <meta property="og:title" content="Despliegue de aplicaciones python" />
<meta property="og:description" content="Despliegue de aplicaciones python" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sysadblog.onrender.com/posts/practica_despliegue_aplicaciones_python/" />
<meta property="article:published_time" content="2021-11-17T19:48:03+01:00" />
<meta property="article:modified_time" content="2021-11-17T19:48:03+01:00" />


    <title>
  Despliegue de aplicaciones python · Sysadblog
</title>

    
      <link rel="canonical" href="https://sysadblog.onrender.com/posts/practica_despliegue_aplicaciones_python/">
    

    <link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="/css/coder.min.8e2b2510f60e1715eae08d113a808dcdaf17f6f711edb9e969be38d0074d240d.css" integrity="sha256-jislEPYOFxXq4I0ROoCNza8X9vcR7bnpab440AdNJA0=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css" integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    

    <meta name="generator" content="Hugo 0.80.0" />
  </head>

  
  
    
  
  <body class="preload-transitions colorscheme-auto"
        onload=""
  >
    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Sysadblog
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/aboutme">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/categories">Categories</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://sysadblog.onrender.com/posts/practica_despliegue_aplicaciones_python/">
              Despliegue de aplicaciones python
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime='2021-11-17T19:48:03&#43;01:00'>
                November 17, 2021
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              8-minute read
            </span>
          </div>
          <div class="authors">
    <i class="fa fa-user" aria-hidden="true"></i>
      <a href="/authors/daniel-parrales/">Daniel Parrales</a></div>
          <div class="categories">
  <i class="fa fa-folder" aria-hidden="true"></i>
    <a href="/categories/aplicaciones-web/">Aplicaciones Web</a></div>

          
        </div>
      </header>

      <div>
        
        <h1 id="despliegue-de-aplicaciones-python">
  Despliegue de aplicaciones python
  <a class="heading-link" href="#despliegue-de-aplicaciones-python">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<h2 id="tarea-1-entorno-de-desarrollo">
  Tarea 1: Entorno de desarrollo
  <a class="heading-link" href="#tarea-1-entorno-de-desarrollo">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Vamos a desarrollar la aplicación del <a href="https://docs.djangoproject.com/en/3.2/intro/tutorial01/">tutorial de django 3.2</a>. Vamos a configurar tu equipo como entorno de desarrollo para trabajar con la aplicación, para ello:</p>
<ul>
<li>Realiza un fork del repositorio de GitHub: <a href="https://github.com/josedom24/django_tutorial">https://github.com/josedom24/django_tutorial</a>.</li>
<li>Crea un entorno virtual de python3 e instala las dependencias necesarias para que funcione el proyecto.</li>
<li>Comprueba que vamos a trabajar con una base de datos sqlite. ¿Qué fichero tienes que consultar?. ¿Cómo se llama la base de datos que vamos a crear?</li>
<li>Crea la base de datos. A partir del modelo de datos se crean las tablas de la base de datos.</li>
<li>Crea un usuario administrador.</li>
<li>Ejecuta el servidor web de desarrollo y entra en la zona de administración (/admin) para comprobar que los datos se han añadido correctamente.</li>
<li>Crea dos preguntas, con posibles respuestas.</li>
<li>Comprueba en el navegador que la aplicación está funcionando, accede a la url /polls.</li>
</ul>
<hr>
<p>Tal y como se nos ha indicado, vamos a realizar en primer lugar un fork del repositorio:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/fork_repo.png" alt="fork_repo.png"></p>
<p>A continuación, clonamos el repositorio, creamos un entorno virtual e instalamos las dependencias del proyecto:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">git clone git@github.com:DanielPG25/django_tutorial.git

python3 -m venv django

source django/bin/activate

pip install -r requirements.txt
</code></pre></div><p>Para verificar la base de datos con la que vamos a trabajar, vemos el contenido del fichero <code>django_tutorial/settings.py</code>:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/basedatos_sqlite.png" alt="basedatos_sqlite.png"></p>
<p>Como vemos, nos indica que vamos a trabajar con una base de datos de tipo sqlite llamada <code>db.sqlite3</code>. Ahora que comprobado esto, podemos crear la base de datos. Para ello debemos ejecutar la migración inicial que nos indica al iniciar la aplicación:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/basedatosinicial_sqlite.png" alt="basedatosinicial_sqlite.png"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">python3 manage.py migrate
</code></pre></div><p>Con esto hemos creado la base de datos inicial. Ahora vamos a proceder a crear un usuario administrador:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">python3 manage.py createsuperuser
</code></pre></div><p>Antes de poder acceder a la aplicación, tenemos que añadir la ip desde la que vamos a acceder al fichero <code>django_tutorial/settings.py</code>, en la línea de allowed_hosts:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/allowed_host.png" alt="allowed_host.png"></p>
<p>Ahora vamos a probar si funciona la aplicación. Para ello ejecutamos lo siguiente:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">python3 manage.py runserver 0.0.0.0:8000
</code></pre></div><p>Ya podemos acceder desde nuestro navegador a la página principal:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/principal.png" alt="principal.png"></p>
<p>Y en la zona de administración, en la cual tendremos que introducir el usuario y la contraseña que creamos antes:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/zona_administracion.png" alt="zona_administracion.png"></p>
<p>Podemos crear las preguntas si damos al botón de <code>questions</code> y <code>add question</code>. Así pues, voy a crear dos preguntas con sus respuestas:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/preguntas_encuesta.png" alt="preguntas_encuesta.png"></p>
<p>Ahora accedemos a la aplicación <code>polls</code> para ver si las preguntas y sus respuestas funcionan correctamente:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/polls_preguntas.png" alt="polls_preguntas.png"></p>
<p><img src="/images/practica_despliegue_aplicaciones_python/pregunta1_encuesta.png" alt="pregunta1_encuesta.png"></p>
<p><img src="/images/practica_despliegue_aplicaciones_python/pregunta2_encuesta.png" alt="pregunta2_encuesta.png"></p>
<p>Como vemos, la aplicación funciona perfectamente.</p>
<hr>
<h2 id="tarea-2-entorno-de-producción">
  Tarea 2: Entorno de producción
  <a class="heading-link" href="#tarea-2-entorno-de-producci%c3%b3n">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Vamos a realizar el despliegue de nuestra aplicación en un entorno de producción, para ello vamos a utilizar nuestro VPS, sigue los siguientes pasos:</p>
<ul>
<li>Clona el repositorio en el VPS.</li>
<li>Crea un entorno virtual e instala las dependencias de tu aplicación.</li>
<li>Instala el módulo que permite que python trabaje con mysql:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">(env)$ pip install mysqlclient
</code></pre></div><ul>
<li>Crea una base de datos y un usuario en mysql.</li>
<li>Configura la aplicación para trabajar con mysql, para ello modifica la configuración de la base de datos en el archivo settings.py:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">      DATABASES = {
          &#39;default&#39;: {
              &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,
              &#39;NAME&#39;: &#39;myproject&#39;,
              &#39;USER&#39;: &#39;myprojectuser&#39;,
              &#39;PASSWORD&#39;: &#39;password&#39;,
              &#39;HOST&#39;: &#39;localhost&#39;,
              &#39;PORT&#39;: &#39;&#39;,
          }
      }
</code></pre></div><ul>
<li>Como en la tarea 1, realiza la migración de la base de datos que creará la estructura de datos necesarias. Comprueba que se han creado la base de datos y las tablas.</li>
<li>Crea un usuario administrador.</li>
<li>Elige un servidor de aplicaciones python y configura nginx como proxy inverso para servir la aplicación.</li>
<li>Debes asegurarte que el contenido estático se está sirviendo: ¿Se muestra la imagen de fondo de la aplicación? ¿Se ve de forma adecuada la hoja de estilo de la zona de administración?.</li>
<li>Desactiva en la configuración el modo debug a False. Para que los errores de ejecución no den información sensible de la aplicación.</li>
<li>Muestra la página funcionando. En la zona de administración se debe ver de forma adecuada la hoja de estilo.</li>
</ul>
<hr>
<p>Los primeros pasos en nuestra vps son los mismos que en el entorno de desarrollo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">git clone https://github.com/DanielPG25/django_tutorial.git

python3 -m venv django

source django/bin/activate

pip install -r requirements.txt
</code></pre></div><p>Tras esto instalamos el módulo de python que hace posible que pueda trabajar con mysql (antes debemos instalar las dependencias de dicho módulo):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">apt install python3-dev default-libmysqlclient-dev build-essential

pip install mysqlclient
</code></pre></div><p>Ahora debemos crear un usuario y una base de datos en mariadb para poder almacenar las tablas y datos de la aplicación:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">create database django_polls;

grant all on django_polls.* to &#39;django_polls&#39;@&#39;%&#39; identified by &#39;*****&#39; with grant option;
</code></pre></div><p>A continuación, vamos a modificar el fichero <code>settings.py</code> para adaptarlo a la nueva base de datos:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/config_basedatos.png" alt="config_basedatos.png"></p>
<p>Con esto, ya podemos ejecutar la migración y crear el usuario administrador como hicimos anteriormente:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">python3 manage.py migrate

python3 manage.py createsuperuser
</code></pre></div><p>Ahora tenemos que usar un servidor de aplicaciones python y configurar nginx como proxy inverso para servir la aplicación. Así pues, he elegido el servidor de aplicaciones gunicorn. Por ello vamos a instalar gunicorn con pip en nuestro entorno virtual:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">pip install gunicorn
</code></pre></div><p>Una vez hecho esto, podríamos ejecutar la aplicación simplemente con el siguiente comando (si nos encontramos en el directorio principal de la aplicación):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">gunicorn django_tutorial.wsgi
</code></pre></div><p>Sin embargo, como queremos que la aplicación se este ejecutando continuamente para poder acceder a ella desde un virtualhost en nginx, vamos a crear una unidad systemd para poder controlar ese proceso de forma más sencilla:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">nano /etc/systemd/system/gunicorn-djangopolls.service

[Unit]
Description=gunicorn-djangopolls
After=network.target

[Install]
WantedBy=multi-user.target

[Service]
User=www-data
Group=www-data
Restart=always

ExecStart=/home/dparrales/venv/django/bin/gunicorn django_tutorial.wsgi
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID

WorkingDirectory=/home/dparrales/django_tutorial
Environment=PYTHONPATH=&#39;/home/dparrales/django_tutorial:/home/dparrales/venv/django/lib/python3.9/site-packages&#39;

PrivateTmp=true
</code></pre></div><p>Ahora habilitamos e iniciamos el servicio:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">systemctl enable gunicorn-djangopolls.service

systemctl start gunicorn-djangopolls.service 
</code></pre></div><p>Si en algún momento cambiamos la configuración del fichero que acabamos de crear, debemos recargar el demonio:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">systemctl daemon-reload
</code></pre></div><p>Ahora ya podemos crear el virtualhost en nginx para que sirva la aplicación:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">nano /etc/nginx/sites-available/django_polls

server {
        listen 80;
        listen [::]:80;

        root /home/dparrales/django_tutorial;

        index index.html index.php index.htm index.nginx-debian.html;

        server_name djangopolls.sysadblog.com;

        location / {
                proxy_pass http://localhost:8000;
                include proxy_params;
        }

        location /static {
                alias /home/dparrales/venv/django/lib/python3.9/site-packages/django/contrib/admin/static;
        }
}
</code></pre></div><ul>
<li><strong>Nota:</strong> Ese último alias es para que cargue el contenido estático de la zona de administración.</li>
</ul>
<p>Creamos el enlace simbólico, reiniciamos el servicio de nginx e intentamos acceder a la aplicación:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">ln -s /etc/nginx/sites-available/django_polls /etc/nginx/sites-enabled/django_polls

systemctl reload nginx
</code></pre></div><p>Debemos acordarnos de cambiar la línea de <code>allowed-hosts</code> en el fichero <code>settings.py</code>:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/allowed_host_produccion.png" alt="allowed_host_produccion.png"></p>
<p>Ahora accedemos a la url que indicamos en el virtualhost (tras haber creado un nuevo registro CNAME en nuestro dns):</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/pagina_principal.png" alt="pagina_principal.png"></p>
<p>Si accedemos a la zona de administración, debería cargarnos el contenido estático gracias al alias que pusimos en el virtualhost:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/zona_admin.png" alt="zona_admin.png"></p>
<p>Como vemos, ha cargado el contenido estático y hemos podido entrar con las credenciales que creamos anteriormente. Ahora solo tenemos que cambiar la línea de <code>DEBUG</code> a <code>FALSE</code> para finalizar con esta parte del ejercicio:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/debug.png" alt="debug.png"></p>
<h2 id="tarea-3-modificación-de-nuestra-aplicación">
  Tarea 3: Modificación de nuestra aplicación
  <a class="heading-link" href="#tarea-3-modificaci%c3%b3n-de-nuestra-aplicaci%c3%b3n">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Vamos a realizar cambios en el entorno de desarrollo y posteriormente vamos a subirlas a producción. Vamos a realizar tres modificaciones, pero recuerda que primero lo haces en el entrono de desarrollo, y luego tendrás que llevar los cambios a producción:</p>
<ul>
<li>
<p>Modifica la página inicial donde se ven las encuestas para que aparezca tu nombre: Para ello modifica el archivo <code>django_tutorial/polls/templates/polls/index.html</code>.</p>
</li>
<li>
<p>Modifica la imagen de fondo que se ve en la aplicación.</p>
</li>
<li>
<p>Vamos a crear una nueva tabla en la base de datos, para ello sigue los siguientes pasos:</p>
<ul>
<li>Añade un nuevo modelo al fichero polls/models.py:</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">          class Categoria(models.Model):	
          	Abr = models.CharField(max_length=4)
          	Nombre = models.CharField(max_length=50)

          	def __str__(self):
          		return self.Abr+&#34; - &#34;+self.Nombre 		
</code></pre></div><pre><code>* Crea una nueva migración.
* Y realiza la migración.
* Añade el nuevo modelo al sitio de administración de django:
  Para ello cambia la siguiente línea en el fichero polls/admin.py:
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">          from .models import Choice, Question
</code></pre></div><pre><code>  Por esta otra:
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">          from .models import Choice, Question, Categoria
</code></pre></div><pre><code>  Y añade al final la siguiente línea:
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">          admin.site.register(Categoria)
</code></pre></div><pre><code>*  Despliega el cambio producido al crear la nueva tabla en el entorno de producción.
</code></pre>
<hr>
<p>Los cambios se realizarán en desarrollo, para posteriormente subirlos a github y descargarlos en producción. Todo esto hay que hacerlo habiendo añadido al fichero <code>.gitignore</code> el fichero <code>settigs.py</code>, para no nos pise la configuración que hemos hecho cada vez que hagamos un <code>git pull</code>. Con esto dicho, vamos a empezar con lo que se nos ha pedido. Así pues, vamos a modificar el fichero <code>django_tutorial/polls/templates/polls/index.html</code> para que aparezca nuestro nombre:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">nano django_tutorial/polls/templates/polls/index.html

{% load static %}

&lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;{% static &#39;polls/style.css&#39; %}&#34;&gt;
Daniel Parrales Garcia
{% if latest_question_list %}
    &lt;ul&gt;
    {% for question in latest_question_list %}
    &lt;li&gt;&lt;a href=&#34;{% url &#39;polls:detail&#39; question.id %}&#34;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
{% else %}
    &lt;p&gt;No polls are available.&lt;/p&gt;
{% endif %}

</code></pre></div><p>Una vez hecho esto y probado que funciona, subimos el cambio a github y lo descargamos en el entorno de producción:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/minombre_polls.png" alt="minombre_polls.png"></p>
<p>A continuación vamos a modificar la imagen de fondo de la página principal de la aplicación. Para ello hemos de modificar el siguiente fichero: <code>django_tutorial/polls/templates/index.html</code>. En este fichero modificamos la línea de la imagen:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/cambiarimagen.png" alt="cambiarimagen.png"></p>
<p>Tras probar que funciona en el entorno de desarrollo, volvemos a subirlo a github y lo descargamos en producción:</p>
<p><img src="/images/practica_despliegue_aplicaciones_python/imagen_produccion.png" alt="imagen_produccion.png"></p>
<p>Ya solo nos queda añadir una nueva tabla en la base de datos. Para ello, y siguiendo las instrucciones que se nos indican:</p>
<ul>
<li>Añadimos el modelo que nos han dado al fichero <code>polls/models.py</code>:</li>
</ul>
<p><img src="/images/practica_despliegue_aplicaciones_python/cambiarmodelo.png" alt="cambiarmodelo.png"></p>
<ul>
<li>Creamos una nueva migración:</li>
</ul>
<p><img src="/images/practica_despliegue_aplicaciones_python/hacermigracion.png" alt="hacermigracion.png"></p>
<ul>
<li>Realizamos la migración:</li>
</ul>
<p><img src="/images/practica_despliegue_aplicaciones_python/migrado.png" alt="migrado.png"></p>
<ul>
<li>Añadimos el nuevo modelo al sitio de administración de django (<code>polls/admin.py</code>) cambiando las líneas que se nos indica en las instrucciones:</li>
</ul>
<p><img src="/images/practica_despliegue_aplicaciones_python/cambiaradmin.png" alt="cambiaradmin.png"></p>
<ul>
<li>Tras comprobar que funciona en desarrollo, subimos el cambio a github y lo descargamos en producción (hay que recordar que en producción debemos volver a realizar la migración):</li>
</ul>
<p><img src="/images/practica_despliegue_aplicaciones_python/nuevatabla.png" alt="nuevatabla.png"></p>
<p><img src="/images/practica_despliegue_aplicaciones_python/categoria.png" alt="categoria.png"></p>
<p>Con esto hemos finalizado con lo que se nos había pedido.</p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>El camino a la locura de un sysadmin</p>
      
      
        ©
        
        2021
         Daniel Parrales 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
    </section>
  </footer>


    </main>

    
      
      <script src="/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js" integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
